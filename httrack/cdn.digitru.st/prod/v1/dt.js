var DigiTrustConfig=DigiTrustConfig||function(){{var a={};a.dtIframeOrigin="//cdn.digitru.st",a.dtIframeSource="//cdn.digitru.st/prod/v1/dt.html",a.dtUsagePixelSource="//i.digitru.st/i/stats/usage",a.dtIdentityCreateURl="//i.digitru.st/i/id/jsonp.js"}return a}(),DigiTrustCommons=DigiTrustCommons||function(){{var a={},b=a.dtIdKey="DigiTrust.Identity.v1",c=(a.dtMaxCookieAge=86400,a.dtIframeReadyRoute="DigiTrust.iframe.ready",a.dtIframeIdentityRequestRoute="DigiTrust.Identity.request",a.dtIframeIdentityResponseRoute="DigiTrust.Identity.response",a.dtOptOutId="optout",a.readLocalIdentity=function(a){var b=null;return a&&a.cookies===!1||(b=c()),null!==b&&(b.lastRead=(new Date).getTime(),a&&a.write&&d(b,{cookies:!0})),b},a.readLocalIdentityFromCookies=function(){var a=null,c=e(b);if(null!==c)try{var d=DigiTrustB64.decode(decodeURIComponent(c));a=JSON.parse(d)}catch(f){}return a}),d=a.writeLocalIdentity=function(a,b){if(!b||b.cookies!==!1){var c=encodeURIComponent(DigiTrustB64.encode(JSON.stringify(a))),d=DigiTrustCommons.dtIdKey+"="+c+"; max-age="+DigiTrustCommons.dtMaxCookieAge+"; path=/";a&&b&&b.domain&&(d=d+"; domain="+b.domain),document.cookie=d}},e=(a.submitUsageEvent=function(a,b,c){var d=DigiTrustConfig.dtUsagePixelSource+"?member="+encodeURIComponent(b);c&&(d=d+"&token="+encodeURIComponent(c)),d+="&dtid=",a&&a.id&&(d+=a.id);var e=document.createElement("img");c&&e.setAttribute("id","DigiTrust:"+c),e.setAttribute("src",d),e.style.display="none",e.width="0",e.height="0",document.body.appendChild(e)},a.getCookieValue=function(a){var b=null,c=document.cookie.split(a+"=");return c.length>=2&&(b=c.pop().split(";").shift()),b});a.getPostMessageListener=function(a){var b=window.addEventListener?"addEventListener":"attachEvent",c="attachEvent"===b?"onmessage":"message",d=window[b];return function(){d(c,a,!1)}},a.loadJS=function(a,b,c){var d=document.createElement("script");d.src=a,d.async=!0,d.onerror=function(){c()},d.onreadystatechange=d.onload=function(){var a=d.readyState;b.done||a&&!/loaded|complete/.test(a)||(b.done=!0,b())},document.getElementsByTagName("head")[0].appendChild(d)}}return a}(),DigiTrustB64=DigiTrustB64||function(){var a={},b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=(a.encode=function(a){var d,e,f,g,h,i,j,k="",l=0;for(a=c(a);l<a.length;)d=a.charCodeAt(l++),e=a.charCodeAt(l++),f=a.charCodeAt(l++),g=d>>2,h=(3&d)<<4|e>>4,i=(15&e)<<2|f>>6,j=63&f,isNaN(e)?i=j=64:isNaN(f)&&(j=64),k=k+b.charAt(g)+b.charAt(h)+b.charAt(i)+b.charAt(j);return k},a.decode=function(a){var c,e,f,g,h,i,j,k="",l=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<a.length;)g=b.indexOf(a.charAt(l++)),h=b.indexOf(a.charAt(l++)),i=b.indexOf(a.charAt(l++)),j=b.indexOf(a.charAt(l++)),c=g<<2|h>>4,e=(15&h)<<4|i>>2,f=(3&i)<<6|j,k+=String.fromCharCode(c),64!=i&&(k+=String.fromCharCode(e)),64!=j&&(k+=String.fromCharCode(f));return k=d(k)},a._utf8_encode=function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b}),d=a._utf8_decode=function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):d>191&&224>d?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b};return a}(),DigiTrust=DigiTrust||function(){var a={},b=null,c=(a.identityListeners=[],a.getIdentityAsync=function(b,c){var d=!1,f=DigiTrustCommons.readLocalIdentity({cookies:!0});null!==f&&(d=!0,a.identityListeners.push({called:!0,member:b.member,token:b.token,callback:null}),c({success:!0,identity:f})),!1===d&&a.identityListeners.push({called:!1,member:b.member,token:b.token,callback:c}),DigiTrustCommons.getPostMessageListener(a.messageRouter)();e()},a.getIdentitySync=function(b){var c=DigiTrustCommons.readLocalIdentity({cookies:!0}),d={success:c,identity:c};DigiTrustCommons.getPostMessageListener(a.messageRouter)();e();return DigiTrustCommons.submitUsageEvent(c,b.member,b.token),d},a.messageRouter=function(a){if(!1!=(a.origin===document.location.protocol+DigiTrustConfig.dtIframeOrigin))try{var b=JSON.parse(a.data);DigiTrustCommons.dtIframeReadyRoute===b.type?c(a):DigiTrustCommons.dtIframeIdentityResponseRoute===b.type&&d(a)}catch(e){}},a.childFrameReadyMessageReceived=function(a){a.source.postMessage(JSON.stringify({version:1,type:DigiTrustCommons.dtIframeIdentityRequestRoute}),document.location.protocol+DigiTrustConfig.dtIframeOrigin)}),d=a.childFrameIdentityMessageReceived=function(b){var c=null,d=(b.source,JSON.parse(b.data));d.value&&d.value.success===!0&&(c=d.value.identity,DigiTrustCommons.writeLocalIdentity(c,{cookies:!0}));for(var e=a.identityListeners.pop();e;){if(!e.called)try{e.called=!0,e.callback(d.value)}catch(f){}DigiTrustCommons.submitUsageEvent(c,e.member,e.token),e=a.identityListeners.pop()}},e=a.spawnIframe=function(){if(null===b){var c=document.createElement("iframe");c.setAttribute("id",Math.floor(1e7*Math.random())),c.setAttribute("src",DigiTrustConfig.dtIframeSource),c.style.display="none",document.body.appendChild(c),b=a.childFrame=c}return b};return DigiTrustCommons.getPostMessageListener(a.messageRouter)(),a}();