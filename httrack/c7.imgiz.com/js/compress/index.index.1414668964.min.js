if(!Array.prototype.indexOf){Array.prototype.indexOf=function(b){var a=this.length;var c=Number(arguments[1])||0;c=(c<0)?Math.ceil(c):Math.floor(c);if(c<0){c+=a}for(;c<a;c++){if(c in this&&this[c]===b){return c}}return -1}}var feedCookieName="feed_v1";var feedSettings;var page=0;var channelLoader;var feedLoader;var feed=new function(){this.create=function(){$.ajax({url:"/ajax/feed/create",type:"get",data:{},success:function(a){a=$.parseJSON(a);if(a.error==0){$("section.social_popular").remove();$("section.featured_area").remove();$("section.social_popular").css("margin-top","100px");$("div.wrapper.bg_color").html(a.html);feedSettings=feed.readSettings();if(!feedSettings.showSettings){$("div.user_feed_on_off").hide();$("#feed_settings").attr("title","Ayarlarımı Aç");$("#feed_settings").html("Ayarlarımı Aç")}var b=$("div.suggested_channels").attr("data-count");if(parseInt(b)==0){$("div.suggested_channels").hide()}setInterval(function(){feed.loadFeed(true)},297000);setInterval(function(){feed.loadChannels()},120000);feed.setFeedScroller()}}})},this.loadFeed=function(a){page=((typeof a!=="undefined")&&a)?0:(page+1);$("div.feed_content_left a.video_more").show();$("div.feed_content_loader").show();this.unsetFeedScroller();$.ajax({url:"/ajax/feed/module",type:"get",data:{area:"feed",page:page},success:function(b){b=$.parseJSON(b);if(b.error!=1){$("div.feed_content_loader").hide();if((typeof a!=="undefined")&&a){$("div.feed_area").html(b.html)}else{$("div.feed_area").append(b.html)}feed.setFeedScroller();if(b.error==2){$("div.feed_content_left a.video_more").hide();feed.unsetFeedScroller()}}}})},this.loadPlaylist=function(a){$("div#playlist_area").fadeOut();$.ajax({url:"/ajax/feed/module",type:"get",data:{area:"playlist"},success:function(b){b=$.parseJSON(b);if(b.error==0){$("div#playlist_area").html(b.html);$("div#playlist_area").fadeIn()}}})},this.changeSettings=function(a){clearInterval(channelLoader);clearInterval(feedLoader);var c=$(a).attr("data-id");var b=$(a).hasClass("on");$.ajax({url:"/ajax/feed/module",type:"get",data:{area:"settings",category:c,option:b},success:function(d){clearInterval(channelLoader);clearInterval(feedLoader);feedLoader=setInterval(function(){clearInterval(feedLoader);feed.loadFeed(true)},1000);channelLoader=setInterval(function(){clearInterval(channelLoader);feed.loadChannels()},2000)}})},this.loadChannels=function(){$("div.channel_area").fadeOut();$.ajax({url:"/ajax/feed/module",type:"get",data:{area:"channel"},success:function(a){a=$.parseJSON(a);if(a.error==0){$("div.suggested_channels").show();$("div.channel_area").html(a.html);$("div.channel_area").fadeIn()}else{$("div.suggested_channels").hide()}}})},this.closeSettings=function(){feedSettings=this.readSettings();if(feedSettings.showSettings){$("div.user_feed_on_off").hide("slow");$("#feed_settings").attr("title","Ayarlarımı Aç");$("#feed_settings").html("Ayarlarımı Aç");feedSettings.showSettings=false}else{$("div.user_feed_on_off").show("slow");$("#feed_settings").attr("title","Ayarlarımı Kapat");$("#feed_settings").html("Ayarlarımı Kapat");feedSettings.showSettings=true}this.setSettings(feedSettings)},this.readSettings=function(){try{settings=JSON.parse(readCookie(feedCookieName))||{showSettings:true}}catch(a){settings={showSettings:true}}return settings},this.setSettings=function(a){createCookie(feedCookieName,JSON.stringify(a))},this.fireFeed=function(){var a=setInterval(function(){if($(".user_settings_link").length){clearInterval(a);feed.create()}},100)},this.setFeedScroller=function(){$(window).scroll(function(){if($(window).scrollTop()+$(window).height()>=($(document).height()-350)){feed.loadFeed()}})},this.unsetFeedScroller=function(){$(window).unbind("scroll")},this.showPlaylistVideo=function(){$("body").append('<div id="feed_playlist_video_box" class="modal_outer"><div class="modal_w_inner" style="margin:-240px 0 0 -340px;"><span onclick="javascript:feed.closeMagicBox();" class="bttn_close_list radio_sprt" title="Kapat"></span><div class="add_f_radio"><img style="left:50%;top:50%;position:absolute;" src="http://c10.imgiz.com/html5/images/ajax-loading.gif"/></div></div></div>');$.ajax({url:"/ajax/feed/module",type:"get",data:{area:"playlistVideo"},success:function(a){a=$.parseJSON(a);$("div.add_f_radio").html(a.player)}})},this.closeMagicBox=function(){$("#feed_playlist_video_box").remove()}};$(document).ready(function(){if(showFeed=="1"){feed.fireFeed()}});